services:
  build:
    build:
      args:
        - GOCRY_VERSION=local
    pull_policy: if_not_present
    image: idelchi/gocry:dev
    container_name: gocry
    hostname: gocry
    user: user
    volumes:
      - .:/home/user/ws
    extra_hosts:
      - host:host-gateway
    working_dir: /home/user/ws
    networks:
      - gocry-network

  kit:
    pull_policy: if_not_present
    image: idelchi/devenv:latest
    container_name: kit
    hostname: kit
    volumes:
      - $PWD:/home/ci/ws
    extra_hosts:
      - host.docker.internal:host-gateway
    working_dir: /home/ci/ws

# The default network used to connect the containers
# Is not needed when the services are defined inside one project,
# but can be used to connect external containers to the network
networks:
  gocry-network:
    name: gocry-network
    driver: bridge
